<div class="dashboard-container">
  @if (dashboardData$ | async; as data) {
    <div class="welcome-header">
      <h1>Bienvenido, {{ data.student.firstName }}</h1>
      <p>Este es tu resumen académico actual.</p>
    </div>

    <div class="cards-container">
      <!-- Card: Información del Programa -->
      <mat-card class="dashboard-card">
        <mat-card-header>
          <mat-icon mat-card-avatar>school</mat-icon>
          <mat-card-title>Programa Académico</mat-card-title>
          <mat-card-subtitle>{{ data.student.creditProgramCode }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p>{{ data.student.creditProgramName }}</p>
          <p><strong>Créditos requeridos:</strong> {{ data.student.totalCreditsRequired }}</p>
        </mat-card-content>
      </mat-card>

      <!-- Card: Estado de Inscripciones -->
      <mat-card class="dashboard-card">
        <mat-card-header>
          <mat-icon mat-card-avatar>class</mat-icon>
          <mat-card-title>Inscripciones</mat-card-title>
          <mat-card-subtitle>Resumen de tus materias</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p class="enrollment-count">
            Has inscrito <strong>{{ data.activeEnrollmentsCount }}</strong> de <strong>3</strong> materias permitidas.
          </p>
          @if (data.activeEnrollmentsCount < 3) {
            <p>
              Aún puedes inscribir {{ 3 - data.activeEnrollmentsCount }} materia(s).
            </p>
          }
          @if (data.activeEnrollmentsCount === 3) {
            <p>
              Has alcanzado el límite de inscripciones.
            </p>
          }
        </mat-card-content>
      </mat-card>

      <!-- Card: Información Personal -->
      <mat-card class="dashboard-card">
        <mat-card-header>
          <mat-icon mat-card-avatar>account_circle</mat-icon>
          <mat-card-title>Información Personal</mat-card-title>
          <mat-card-subtitle>{{ data.student.studentNumber }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p><strong>Nombre:</strong> {{ data.student.fullName }}</p>
          <p><strong>Email:</strong> {{ data.student.email }}</p>
        </mat-card-content>
      </mat-card>
    </div>
  } @else {
    <div class="loading-container">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
      <p>Cargando tu información...</p>
    </div>
  }
</div>
